process {

    // TODO: The time needs to be adjusted
    time = '5d'

    withLabel:retry_twice {
        errorStrategy = 'retry'
        maxRetries    = 2
    }
    withLabel:retry_three_times {
        errorStrategy = 'retry'
        maxRetries    = 3
    }
    withLabel:ignore_errors {
        errorStrategy = 'ignore'
    }

    withName: BRAKER {
        cpus = 16
        memory = { 75.GB * task.attempt }
        time = 16.h
    }
    withName: REPEAT_MODELER {
        cpus = 16
        memory = { 50.GB * task.attempt }
        time = 12.h
    }
    withName: REPEAT_MASKER {
        cpus = 16
        memory = { 50.GB * task.attempt }
        time = 12.h
    }
    withName: BUSCO {
        cpus = 8
        memory = { 500.GB * task.attempt }
        time = 8.h
    }
    withName: EUKCC {
        cpus = 8
        memory = { 36.GB * task.attempt }
        time = 8.h
    }
    withName: BAT {
        cpus = 16
        memory = { 72.GB * task.attempt }
        time = 8.h
    }
    withName: REFORMAT_BAT {
        cpus = 1
        memory = { 20.GB * task.attempt }
        time = 1.h
    } 
    withName: ANNOTATE_GFF {
        cpus = 1
        memory = { 1.GB * task.attempt }
        time = 4.h
    }
    withName: ANTISMASH {
        cpus = 4
        memory = { 2.GB * task.attempt }
        time = 8.h
    }
    withName: CHECKM2_NCBI {
        cpus = 16
        memory = { 9.GB * task.attempt }
    }
    withName: CHECKM2_CATALOGUE {
        cpus = 32
        memory = { 50.GB * task.attempt }
    }
    withName: CLASSIFY_CLUSTERS {
        cpus = 1
        memory = { 1.GB * task.attempt }
    }
    withName: CORE_GENES {
        cpus = 1
        memory = { 1.GB * task.attempt }
    }
    withName: CRISPRCAS_FINDER {
        cpus = 1
        memory = { 10.GB * task.attempt }
        time = 4.h
    }
    withName: DBCAN {
        cpus   = 8
        memory = { 10.GB * task.attempt }
        time = 8.h
    }
    withName: DEFENSE_FINDER {
        cpus = 1
        memory = { 2.GB * task.attempt }
        time = 8.h
    }
    withName: DETECT_NCRNA {
        cpus = 4
        memory = { 5.GB * task.attempt }
        time = 12.h
    }
    withName: DETECT_TRNA {
        cpus = 4
        memory = { 2.GB * task.attempt }
        time = 12.h
    }
    withName: DREP {
        cpus = 32
        memory = { 200.GB * task.attempt }
    }
    withName: DREP_CHUNKED {
        cpus = 32
        memory = { 200.GB * task.attempt }
    }
    withName: EGGNOG_MAPPER {
        cpus = 16
        memory = { 50.GB * task.attempt }
        time = 20.h
    }
    withName: FILTER_QS50 {
        cpus = 1
        memory = { 1.GB * task.attempt }
    }
    withName: FUNCTIONAL_ANNOTATION_SUMMARY {
        cpus = 1
        memory = { 1.GB * task.attempt }
    }
    withName: GECCO_RUN {
        cpus = 2
        memory = { 12.GB * task.attempt }
    }
    withName: GENE_CATALOGUE {
        cpus = 1
        memory = { 5.GB * task.attempt }
    }
    withName: GENERATE_COMBINED_QC_REPORT {
        cpus = 1
        memory = { 100.MB * task.attempt }
    }
    withName: GENERATE_EXTRA_WEIGHT {
        cpus = 1
        memory = { 1.GB * task.attempt }
    }
    withName: GENOME_SUMMARY_JSON {
        cpus = 1
        memory = { 1.GB * task.attempt }
    }
    withName: GTDBTK_QC {
        cpus = 32
        memory = { 100.GB * task.attempt }
    }
    withName: GTDBTK_TAX {
        cpus = 32
        memory = { 100.GB * task.attempt }
    }
    withName: GUNC {
        cpus = 4
        memory = { 50.GB * task.attempt }
        time = 8.h
    }
    withName: PARSE_DOMAIN {
        cpus = 1
        memory = { 100.MB * task.attempt }
    }
    withName: INDEX_FNA {
        cpus = 1
        memory = { 500.MB * task.attempt }
        time = 8.h
    }
    withName: IPS {
        cpus = 16
        memory = { 40.GB * task.attempt }
        time = 20.h
        maxForks = 120
    }
    withName: IQTREE {
        cpus = 16
        memory = { 20.GB * task.attempt }
    }
    withName: FASTTREE {
        cpus = 1
        memory = { 20.GB * task.attempt }
    }
    withName: KEGG_COMPLETENESS {
        cpus = 1
        memory = { 1.GB * task.attempt }
        time = 4.h
    }
    withName: KRAKEN2_BUILD {
        cpus = 4
        memory = { 50.GB * task.attempt }
    }
    withName: BRACKEN {
        cpus = 4
        memory = { 40.GB * task.attempt }
    }
    withName: MASH_TO_NWK {
        cpus = 1
        memory = { 1.GB * task.attempt }
        time = 4.h
    }
    withName: MASH_SKETCH {
        cpus = 16
        memory = { 100.GB * task.attempt }
    }
    withName: MERGE_NCBI_ENA {
        cpus = 1
        memory = { 1.GB * task.attempt }
    }
    withName: METADATA_TABLE {
        cpus = 1
        memory = { 1.GB * task.attempt }
    }
    withName: MMSEQ {
        cpus = 32
        memory = { 100.GB * task.attempt }
    }
    withName: PANAROO {
        cpus = 8
        memory = { 3.GB * task.attempt }
    }
    withName: PER_GENOME_ANNOTATION_GENERATOR {
        cpus = 16
        memory = { task.attempt == 4 ? 1400.GB : (250.GB * task.attempt) }
    }
    withName: PROTEIN_CATALOGUE_STORE_ANNOTATIONS {
        cpus = 1
        memory = { 10.GB * task.attempt }
        time = 22.h
    }
    withName: PHYLO_TREE {
        cpus = 1
        memory = { 1.GB * task.attempt }
    }
    withName: PROKKA {
        cpus = 8
        memory = { 20.GB * task.attempt }
        time = 2.h
    }
    withName: RENAME_FASTA {
        cpus = 1
        memory = { 500.MB * task.attempt }
    }
    withName: SPLIT_DREP {
        cpus = 1
        memory = { 1.GB * task.attempt }
    }
    withName: SANNTIS {
        cpus = 4
        memory = { 1.GB * task.attempt }
        time = 4.h
    }
}