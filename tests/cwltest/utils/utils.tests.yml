#cwltest

# get_files_from_dir
- job: get_files_from_dir.yml
  tool: ../../../cwl/utils/get_files_from_dir.cwl
  short_name: get_files_from_dir.cwl
  doc: "Get a list of files from directory"
  output:
    files:
      - basename: "GUT_GENOME001921.fa"
        class: File
        checksum: sha1$a72ecc575ecacadf50d4081e073d20ee511bedb8
        size: 2369043
      - basename: "GUT_GENOME000465.fa"
        class: File
        checksum: sha1$90e3b84fe64029a3c556d90a8cebf3fb11e4bb01
        size: 5484822
      - basename: "test-one.csv"
        checksum: sha1$ba148e7ed51c64157c72bc1253eaa9a9e226d170
        class: File
        size: 92
      - basename: "checkm.out"
        checksum: sha1$e924b1a72296c30f17b411d1c1d5c06813b18792
        class: File
        size: 164

# rename contigs
- job: rename_fasta.yml
  tool: ../../../cwl/utils/rename_fasta.cwl
  short_name: rename_fasta.cwl
  doc: "rename fasta to MGYG"
  output:
    naming_table:
      basename: names
      class: File
      checksum: sha1$c7ff9c5d3a01fb77b358c49ecc293e9bf8d58b2e
      size: 74
    renamed_genomes:
      basename: renamed_genomes
      class: Directory
      listing:
        - class: File
          basename: MGYG000000001.fa
          checksum: sha1$d21c40775baf4ce7d1eb14b0962cbf239ed5fa5d
          size: 2365282
        - class: File
          basename: MGYG000000002.fa
          checksum: sha1$9e311e0dea3ea87f966dc2ea0e8ea5e9cf35c1ce
          size: 5485542

# translate genes
- job: translate_genes.yml
  tool: ../../../cwl/utils/translate_genes.cwl
  short_name: translate_genes.cwl
  doc: "translate genes"
  output:
    converted_faa:
      basename: many_pan_genome_reference.faa
      class: File
      size: 1744051
      checksum: sha1$14e5586b5b53b190e265cb8158b3ae8733db5e2a

# touch file
- job: touch_file.yml
  tool: ../../../cwl/utils/touch_file.cwl
  short_name: touch_file.cwl
  doc: "touch empty file"
  output:
    created_file:
      basename: "new_file"
      class: File
      size: 0
      checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709

# cat files
- job: concatenate.yml
  tool: ../../../cwl/utils/concatenate.cwl
  short_name: concatenate.cwl
  doc: "concatenate files"
  output:
    result:
      class: File
      size: 37
      basename: "cat.txt"
      checksum: sha1$f2f67dda72e646e88e8358ec90962f089d71899b

# flatten 2D array to 1D array
- job: flatten_array.yml
  tool: ../../../cwl/utils/flatten_array.cwl
  short_name: flatten_array.cwl
  doc: "flatten array"
  output:
    array1d:
      - class: File
        size: 10
        basename: "input_ena.txt"
        checksum: sha1$34e0c74a71a5317d0e2b053332f48eaf89928976
      - class: File
        size: 27
        basename: "input_ncbi.txt"
        checksum: sha1$093082e302ee050338a70186abfe2c7f6d96af3a

# get file by pattern in filename
- job: get_file_pattern.yml
  tool: ../../../cwl/utils/get_file_pattern.cwl
  short_name: get_file_pattern.cwl
  doc: "get file by pattern"
  output:
    file_pattern:
      class: File
      size: 143
      checksum: sha1$1438a92cb4882c132767f86a17d5c93ea4c24be6
      basename: "translate_genes.yml"


# wrap directory into another directory
- job: return_dir_of_dir_one_dir.yml
  tool: ../../../cwl/utils/return_dir_of_dir.cwl
  short_name: return_dir_of_dir.cwl
  doc: "get dir of one input dir"
  output:
    dir_of_dir:
      class: Directory
      basename: one_dir
      listing:
      - class: Directory
        basename: test-one
        listing:
        - class: File
          basename: checkm.out
          size: 164
          checksum: sha1$e924b1a72296c30f17b411d1c1d5c06813b18792
        - class: File
          basename: GUT_GENOME001921.fa
          size: 2369043
          checksum: sha1$a72ecc575ecacadf50d4081e073d20ee511bedb8
        - class: File
          basename: test-one.csv
          size: 92
          checksum: sha1$ba148e7ed51c64157c72bc1253eaa9a9e226d170
        - class: File
          basename: GUT_GENOME000465.fa
          size: 5484822
          checksum: sha1$90e3b84fe64029a3c556d90a8cebf3fb11e4bb01

# wrap directory into another directory
- job: return_dir_of_dir_many_dirs.yml
  tool: ../../../cwl/utils/return_dir_of_dir.cwl
  short_name: return_dir_of_dir.cwl
  doc: "get dir of two input dirs"
  output:
    pool_directory:
      class: Directory
      basename: many_dirs
      listing:
        - class: Directory
          basename: test-one
          listing:
            - class: File
              basename: checkm.out
              size: 164
              checksum: sha1$e924b1a72296c30f17b411d1c1d5c06813b18792
            - class: File
              basename: GUT_GENOME001921.fa
              size: 2369043
              checksum: sha1$a72ecc575ecacadf50d4081e073d20ee511bedb8
            - class: File
              basename: test-one.csv
              size: 92
              checksum: sha1$ba148e7ed51c64157c72bc1253eaa9a9e226d170
            - class: File
              basename: GUT_GENOME000465.fa
              size: 5484822
              checksum: sha1$90e3b84fe64029a3c556d90a8cebf3fb11e4bb01
        - class: Directory
          basename: test-many
          listing:
            - class: File
              basename: GUT_GENOME000132.fa
              size: 3716226
              checksum: sha1$090c2cdef1e6b9c8d4d4e9d1bf0218e5114870c5
            - class: Directory
              basename: prokka_GUT_GENOME000070
              listing:
                - class: File
                  basename: GUT_GENOME000070.gff
                  size: 6280522
                  checksum: sha1$62c190eef8a2e3f7992642d387cd92aab6e2583f
            - class: File
              basename: GUT_GENOME000028.fa
              size: 5417185
              checksum: sha1$250f384bf6a4abccae12d49491af24412ec37290
            - class: File
              basename: test-many.csv
              size: 148
              checksum: sha1$ebaa8f33880a0dbbdbe588865c6373b9a70a4577
            - class: Directory
              basename: panaroo-output
              listing:
                - class: File
                  basename: pan_genome_reference.fa
                  size: 5149297
                  checksum: sha1$15ac780608aa69d113eea1c0d7d035441b0f25ce
            - class: Directory
              basename: prokka_GUT_GENOME000028
              listing:
                - class: File
                  basename: GUT_GENOME000028.gff
                  size: 6485237
                  checksum: sha1$97a8bf68b7922e77ebad02027b81ee507ac8106b
            - class: File
              basename: GUT_GENOME000263.fa
              size: 3864067
              checksum: sha1$b39eacc4125088a1c97e6ead54a59546cdfdce0c
            - class: Directory
              basename: translated
              listing:
                - class: File
                  basename: many_pan_genome_reference.faa
                  size: 1744051
                  checksum: sha1$14e5586b5b53b190e265cb8158b3ae8733db5e2a
            - class: File
              basename: GUT_GENOME000070.fa
              size: 5231862
              checksum: sha1$eec6406eb11a5a2bdcca6347216c38b7519918f3

# wrap files into directory
- job: return_directory.yml
  tool: ../../../cwl/utils/return_directory.cwl
  short_name: return_directory.cwl
  doc: "return dir of input files"
  output:
    out:
      class: Directory
      basename: "wrapped_directory"
      listing:
        - class: File
          size: 157
          basename: "concatenate.yml"
          checksum: sha1$3109206378a26bce54dc8d860c2a1784be9d5a9d
        - class: File
          size: 156
          basename: "flatten_array.yml"
          checksum: sha1$630ec9c33bebf699eedafaf9e49cc7d98feb4a11

# split protein fasta to chunks
- job: protein_chunker.yml
  tool: ../../../cwl/utils/protein_chunker.yml
  short_name: protein_chunker.yml
  doc: "split fasta to chunks"
  output:
    chunks:
        - basename: 1001_2000.faa
          class: File
          checksum: sha1$4d373f4248caa2656d785437d01384668109a719
          size: 390548
          format: http://edamontology.org/format_1929
          - basename: 1_1000.faa
            class: File
            checksum: sha1$ec4ee664a0804d7661a9335d8e150b7e1022dc75
            size: 356733
            format: http://edamontology.org/format_1929
          - basename: 2001_3000.faa
            class: File
            checksum: sha1$c55ea818eb8978ba23cc40faf1d91e3318ae31a3
            size: 383600
            format: http://edamontology.org/format_1929
          - basename: 3001_4000.faa
            class: File
            checksum: sha1$f328849b17b9dd7dbfc3a2c46fc22ef52b9cdb21
            size: 365403
            format: http://edamontology.org/format_1929
          - basename: 4000_4633.faa
            class: File
            checksum: sha1$71d4c68bb966f9e4333398e28f560cee6978f992
            size: 247767
            format: http://edamontology.org/format_1929
          - basename: split_to_chunks.py
            class: File
            checksum: sha1$aa7ffd49df332a62f66086d4828dff5ebe5824ca
            size: 1610
            format: http://edamontology.org/format_1929
