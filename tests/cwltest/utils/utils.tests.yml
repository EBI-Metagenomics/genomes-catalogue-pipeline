#cwltest

# get_files_from_dir
- job: get_files_from_dir.yml
  tool: ../../../cwl/utils/get_files_from_dir.cwl
  short_name: get_files_from_dir.cwl
  doc: "Get a list of files from directory"
  output:
    files:
      - basename: "GUT_GENOME001921.fa"
        class: File
        checksum: sha1$a72ecc575ecacadf50d4081e073d20ee511bedb8
        size: 2369043
      - basename: "GUT_GENOME000465.fa"
        class: File
        checksum: sha1$90e3b84fe64029a3c556d90a8cebf3fb11e4bb01
        size: 5484822
      - basename: "test-one.csv"
        checksum: sha1$ba148e7ed51c64157c72bc1253eaa9a9e226d170
        class: File
        size: 92
      - basename: "checkm.out"
        checksum: sha1$e924b1a72296c30f17b411d1c1d5c06813b18792
        class: File
        size: 164

# touch file
- job: touch_file.yml
  tool: ../../../cwl/utils/touch_file.cwl
  short_name: touch_file.cwl
  doc: "touch empty file"
  output:
    created_file:
      basename: "new_file"
      class: File
      size: 0
      checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709

# cat files
- job: concatenate.yml
  tool: ../../../cwl/utils/concatenate.cwl
  short_name: concatenate.cwl
  doc: "concatenate files"
  output:
    result:
      class: File
      size: 37
      basename: "cat.txt"
      checksum: sha1$f2f67dda72e646e88e8358ec90962f089d71899b

# flatten 2D array to 1D array
- job: flatten_array.yml
  tool: ../../../cwl/utils/flatten_array.cwl
  short_name: flatten_array.cwl
  doc: "flatten array"
  output:
    array1d:
      - class: File
        size: 10
        basename: "input_ena.txt"
        checksum: sha1$34e0c74a71a5317d0e2b053332f48eaf89928976
      - class: File
        size: 27
        basename: "input_ncbi.txt"
        checksum: sha1$093082e302ee050338a70186abfe2c7f6d96af3a

# get file by pattern in filename
- job: get_file_pattern.yml
  tool: ../../../cwl/utils/get_file_pattern.cwl
  short_name: get_file_pattern.cwl
  doc: "get file by pattern"
  output:
    file_pattern:
      class: File
      size: 143
      checksum: sha1$1438a92cb4882c132767f86a17d5c93ea4c24be6
      basename: "translate_genes.yml"


# wrap directory into another directory
- job: return_dir_of_dir_one_dir.yml
  tool: ../../../cwl/utils/return_dir_of_dir.cwl
  short_name: return_dir_of_dir.cwl
  doc: "get dir of one input dir"
  output:
    dir_of_dir:
      class: Directory
      basename: one_dir
      listing:
      - class: Directory
        basename: test-one
        listing:
        - class: File
          basename: checkm.out
          size: 164
          checksum: sha1$e924b1a72296c30f17b411d1c1d5c06813b18792
        - class: File
          basename: GUT_GENOME001921.fa
          size: 2369043
          checksum: sha1$a72ecc575ecacadf50d4081e073d20ee511bedb8
        - class: File
          basename: test-one.csv
          size: 92
          checksum: sha1$ba148e7ed51c64157c72bc1253eaa9a9e226d170
        - class: File
          basename: GUT_GENOME000465.fa
          size: 5484822
          checksum: sha1$90e3b84fe64029a3c556d90a8cebf3fb11e4bb01

# wrap directory into another directory
- job: return_dir_of_dir_many_dirs.yml
  tool: ../../../cwl/utils/return_dir_of_dir.cwl
  short_name: return_dir_of_dir.cwl
  doc: "get dir of two input dirs"
  output:
    pool_directory:
      class: Directory
      basename: many_dirs
      listing:
        - class: Directory
          basename: test-one
          listing:
            - class: File
              basename: checkm.out
              size: 164
              checksum: sha1$e924b1a72296c30f17b411d1c1d5c06813b18792
            - class: File
              basename: GUT_GENOME001921.fa
              size: 2369043
              checksum: sha1$a72ecc575ecacadf50d4081e073d20ee511bedb8
            - class: File
              basename: test-one.csv
              size: 92
              checksum: sha1$ba148e7ed51c64157c72bc1253eaa9a9e226d170
            - class: File
              basename: GUT_GENOME000465.fa
              size: 5484822
              checksum: sha1$90e3b84fe64029a3c556d90a8cebf3fb11e4bb01
        - class: Directory
          basename: test-many
          listing:
            - class: File
              basename: GUT_GENOME000132.fa
              size: 3716226
              checksum: sha1$090c2cdef1e6b9c8d4d4e9d1bf0218e5114870c5
            - class: Directory
              basename: prokka_GUT_GENOME000070
              listing:
                - class: File
                  basename: GUT_GENOME000070.gff
                  size: 6280522
                  checksum: sha1$62c190eef8a2e3f7992642d387cd92aab6e2583f
            - class: File
              basename: GUT_GENOME000028.fa
              size: 5417185
              checksum: sha1$250f384bf6a4abccae12d49491af24412ec37290
            - class: File
              basename: test-many.csv
              size: 148
              checksum: sha1$ebaa8f33880a0dbbdbe588865c6373b9a70a4577
            - class: Directory
              basename: panaroo-output
              listing:
                - class: File
                  basename: pan_genome_reference.fa
                  size: 5149297
                  checksum: sha1$15ac780608aa69d113eea1c0d7d035441b0f25ce
            - class: Directory
              basename: prokka_GUT_GENOME000028
              listing:
                - class: File
                  basename: GUT_GENOME000028.gff
                  size: 6485237
                  checksum: sha1$97a8bf68b7922e77ebad02027b81ee507ac8106b
            - class: File
              basename: GUT_GENOME000263.fa
              size: 3864067
              checksum: sha1$b39eacc4125088a1c97e6ead54a59546cdfdce0c
            - class: Directory
              basename: translated
              listing:
                - class: File
                  basename: many_pan_genome_reference.faa
                  size: 1744051
                  checksum: sha1$14e5586b5b53b190e265cb8158b3ae8733db5e2a
            - class: File
              basename: GUT_GENOME000070.fa
              size: 5231862
              checksum: sha1$eec6406eb11a5a2bdcca6347216c38b7519918f3

# wrap files into directory
- job: return_directory.yml
  tool: ../../../cwl/utils/return_directory.cwl
  short_name: return_directory.cwl
  doc: "return dir of input files"
  output:
    out:
      class: Directory
      basename: "wrapped_directory"
      listing:
        - class: File
          size: 157
          basename: "concatenate.yml"
          checksum: sha1$3109206378a26bce54dc8d860c2a1784be9d5a9d
        - class: File
          size: 156
          basename: "flatten_array.yml"
          checksum: sha1$630ec9c33bebf699eedafaf9e49cc7d98feb4a11

# filter nulls files
- job: filter_nulls_files.yml
  tool: ../../../cwl/utils/filter_nulls.cwl
  short_name: filter_nulls.cwl
  doc: "filter nulls from input array"
  output:
    out:
    - class: Directory
      basename: help_scripts
      listing:
      - class: File
        basename: convert_json_to_output.py
        size: 503
        checksum: sha1$6587b750f49985b6e48b39d1776daa94fa5f7f1a
      - class: File
        basename: __init__.py
        size: 0
        checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709
      - class: File
        basename: run.sh
        size: 191
        checksum: sha1$74b9aeb38391009f7dc584bea29c3554b30200c7
    - class: Directory
      basename: data_tables
      listing:
      - class: File
        basename: Mdb.csv
        size: 2624
        checksum: sha1$0aa29b7ca5a37f0698a473361724006d73e1dd18
      - class: File
        basename: Cdb.csv
        size: 564
        checksum: sha1$2a2b4cbf2ba5511acf5f8524c9cd9b084fe6377f

# filter nulls files
- job: filter_nulls_empty.yml
  tool: ../../../cwl/utils/filter_nulls.cwl
  short_name: filter_nulls.cwl
  doc: "filter nulls from input array of nulls"
  output:
    out: null