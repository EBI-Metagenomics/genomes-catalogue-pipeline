#cwltest

# get_files_from_dir
- job: get_files_from_dir.yml
  tool: ../../../cwl/utils/get_files_from_dir.cwl
  short_name: get_files_from_dir.cwl
  doc: "Get a list of files from directory"
  output:
    files:
      - class: File
        basename: CAJLGA01.fa
        size: 2291990
        checksum: sha1$cecbaf247c1b1862a88b77f93986cceae1e22a67
      - class: File
        basename: CAJKGB01.fa
        size: 2025917
        checksum: sha1$211e1b18013b8631df5c4e3290a2d08e05a99841
      - class: File
        basename: CAJJTO01.fa
        size: 1672905
        checksum: sha1$b2d063739a50fc031eb4eec94180f56988ae6eab

# get_files_from_dir
- job: get_files_from_dir.yml
  tool: ../../../cwl/utils/get_files_from_dir_one.cwl
  short_name: get_files_from_dir.cwl
  doc: "Get a list of files from directory (dir of 1 file)"
  output:
    file:
      class: File
      basename: "CAJKRY01.fa"
      size: 1773038

# touch file
- job: touch_file.yml
  tool: ../../../cwl/utils/touch_file.cwl
  short_name: touch_file.cwl
  doc: "touch empty file"
  output:
    created_file:
      basename: "new_file"
      class: File
      size: 0
      checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709

# cat files
- job: concatenate.yml
  tool: ../../../cwl/utils/concatenate.cwl
  short_name: concatenate.cwl
  doc: "concatenate files"
  output:
    result:
      class: File
      size: 37
      basename: "cat.txt"
      checksum: sha1$f2f67dda72e646e88e8358ec90962f089d71899b

# flatten 2D array to 1D array
- job: flatten_array.yml
  tool: ../../../cwl/utils/flatten_array.cwl
  short_name: flatten_array.cwl
  doc: "flatten array"
  output:
    array1d:
      - class: File
        size: 10
        basename: "input_ena.txt"
        checksum: sha1$34e0c74a71a5317d0e2b053332f48eaf89928976
      - class: File
        size: 27
        basename: "input_ncbi.txt"
        checksum: sha1$093082e302ee050338a70186abfe2c7f6d96af3a

# get file by pattern in filename
- job: get_file_pattern.yml
  tool: ../../../cwl/utils/get_file_pattern.cwl
  short_name: get_file_pattern.cwl
  doc: "get file by pattern"
  output:
    file_pattern:
      class: File
      size: 143
      checksum: sha1$1438a92cb4882c132767f86a17d5c93ea4c24be6
      basename: "translate_genes.yml"


# wrap directory into another directory
- job: return_dir_of_dir_one_dir.yml
  tool: ../../../cwl/utils/return_dir_of_dir.cwl
  short_name: return_dir_of_dir.cwl
  doc: "get dir of one input dir"
  output:
    dir_of_dir:
      class: Directory
      basename: one_dir
      listing:
        - class: Directory
          basename: '3_0'
          listing:
            - class: File
              basename: CAJKRY01.fa
              checksum: sha1$bde22cdb8b3901e11630391a4f6ecf9d98dfac39
              size: 1773038


# wrap directory into another directory
- job: return_dir_of_dir_many_dirs.yml
  tool: ../../../cwl/utils/return_dir_of_dir.cwl
  short_name: return_dir_of_dir.cwl
  doc: "get dir of two input dirs"
  output:
    pool_directory:
      class: Directory
      basename: many_dirs
      listing:
        - class: Directory
          basename: '2_1'
          listing:
            - class: File
              basename: CAJKXJ01.fa
              checksum: sha1$9f18ca859df6408ccae0775ddcca5115598029d3
              size: 2320626
            - class: File
              basename: CAJKRE01.fa
              checksum: sha1$5a18736b41c827f0de008a8c2da2ca570bb89843
              size: 2314364
        - class: Directory
          basename: '3_0'
          listing:
            - class: File
              basename: CAJKRY01.fa
              checksum: sha1$bde22cdb8b3901e11630391a4f6ecf9d98dfac39
              size: 1773038

# wrap files into directory
- job: return_directory.yml
  tool: ../../../cwl/utils/return_directory.cwl
  short_name: return_directory.cwl
  doc: "return dir of input files"
  output:
    out:
      class: Directory
      basename: "wrapped_directory"
      listing:
        - class: File
          size: 157
          basename: "concatenate.yml"
          checksum: sha1$3109206378a26bce54dc8d860c2a1784be9d5a9d
        - class: File
          size: 156
          basename: "flatten_array.yml"
          checksum: sha1$630ec9c33bebf699eedafaf9e49cc7d98feb4a11

# filter nulls files
- job: filter_nulls_dirs.yml
  tool: ../../../cwl/utils/filter_nulls.cwl
  short_name: filter_nulls.cwl
  doc: "filter nulls from input array of dirs"
  output:
    out_dirs:
    - class: Directory
      basename: help_scripts
      listing:
      - class: File
        basename: convert_json_to_output.py
        size: 503
        checksum: sha1$6587b750f49985b6e48b39d1776daa94fa5f7f1a
      - class: File
        basename: __init__.py
        size: 0
        checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709
      - class: File
        basename: run.sh
        size: 191
        checksum: sha1$74b9aeb38391009f7dc584bea29c3554b30200c7
    - class: Directory
      basename: singletons
      listing:
      - class: File
        basename: CAJKRY01.fa
      - class: File
        basename: CAJKXZ01.fa

# filter nulls files
- job: filter_nulls_files.yml
  tool: ../../../cwl/utils/filter_nulls.cwl
  short_name: filter_nulls.cwl
  doc: "filter nulls from input array of files"
  output:
    out_files:
      - class: File
        basename: concatenate.yml
        size: 157
        checksum: sha1$3109206378a26bce54dc8d860c2a1784be9d5a9d
      - class: File
        basename: cut_header.yml
        size: 58
        checksum: sha1$9d3a3e229a06e35f064a710859dccbb63f3deb64

# filter nulls files
- job: filter_nulls_empty.yml
  tool: ../../../cwl/utils/filter_nulls.cwl
  short_name: filter_nulls.cwl
  doc: "filter nulls from input array of nulls"
  output:
    out_files: null

# cut headers in fasta files (change - to space)
- job: cut_header.yml
  tool: ../../../cwl/utils/cut_header.cwl
  short_name: cut_header.cwl
  doc: "cut fasta headers"
  output:
    created_file:
      basename: "test.faa"
      class: File
      size: 16270
      checksum: sha1$b20c0352039e913ba5fd749ee327d26d0b03b041

# tar.gz folder
- job: tar.yml
  tool: ../../../cwl/utils/tar.cwl
  short_name: tar.cwl
  doc: "tar gz folder"
  output:
    folder_tar:
      basename: "1_1.tar.gz"
      class: File
      size: 1781197
